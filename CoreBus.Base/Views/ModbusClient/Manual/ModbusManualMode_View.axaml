<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:local="clr-namespace:CoreBus.Base.Views.ModbusClient.Manual;assembly=CoreBus.Base"
             xmlns:ViewModels="clr-namespace:ViewModels.ModbusClient.Manual;assembly=ViewModels"
			 xmlns:ModbusRepresentations="clr-namespace:CoreBus.Base.Views.ModbusClient.Manual.Representations;assembly=CoreBus.Base"
             mc:Ignorable="d" 
             d:DesignWidth="1000" d:DesignHeight="550"
             x:Class="CoreBus.Base.Views.ModbusClient.Manual.ModbusManualMode_View"
             x:DataType="ViewModels:ModbusManualMode_VM">

    <UserControl.Styles>

		<StyleInclude Source="avares://AppDesign/Styles/GridSplitter.axaml"/>
		<StyleInclude Source="avares://AppDesign/Styles/TabItem.axaml"/>
		<StyleInclude Source="avares://AppDesign/Styles/SelectableTextBlock.axaml"/>

	</UserControl.Styles>

    <Grid>

		<Grid.RowDefinitions>
			<RowDefinition Height="2*"/>
			<RowDefinition Height="3"/>
			<RowDefinition Height="220"/>
		</Grid.RowDefinitions>


		<Grid Grid.Row="0">
			
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1*"/>
				<ColumnDefinition Width="3"/>
				<ColumnDefinition Width="480"/>
			</Grid.ColumnDefinitions>

			<Grid Grid.Column="0">

				<!-- Table View start definition -->
				
				<Border BorderBrush="{DynamicResource Group_Color_BorderBrush}"
						BorderThickness="1"
						Margin="10"
						CornerRadius="6"
						ClipToBounds="True">

					<Grid RowDefinitions="40,1*">

						<Border Grid.Row="0" 
								Background="{DynamicResource DataGrid_Color_HeaderBackground}"
								BorderThickness="2"
								BorderBrush="{DynamicResource DataGrid_Color_HeaderBackground}"
								CornerRadius="4,4,0,0">

							<Grid ColumnDefinitions="2*,4*,4*,6*"
								  Margin="10,0,10,0">

								<Label Grid.Column="0"
									   Content="ID"/>

								<Label Grid.Column="1"
									   Content="Функция"
									   FontFamily="Segoe UI"/>

								<Label Grid.Column="2"
									   Content="Адрес"/>

								<Label Grid.Column="3"
								       Content="Данные"/>

							</Grid>

						</Border>


						<ScrollViewer x:Name="ScrollViewer_ModbusData" Grid.Row="1">

							<ItemsControl x:Name="ItemsControl_ModbusData">

								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<StackPanel Orientation="Vertical" />
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>

								<ItemsControl.ItemTemplate>

									<DataTemplate x:DataType="local:ModbusDataDisplayedForTable">

										<Border Background="{Binding RowBackground, Mode=OneWay}"
												BorderThickness="2"
												BorderBrush="{Binding RowBackground, Mode=OneWay}"
												PointerPressed="Border_PointerPressed">

											<Grid ColumnDefinitions="2*,4*,4*,6*"
												  Margin="10">

												<Border Grid.Column="0"
														ClipToBounds="True">
													
													<SelectableTextBlock Width="200"
																		 Text="{Binding OperationID, Mode=OneWay}"/>
												</Border>

												<Border Grid.Column="1" 
														ClipToBounds="True">
													
													<SelectableTextBlock Width="200"
																		 Text="{Binding FuncNumber, Mode=OneWay}"/>
												</Border>
												
												<Border Grid.Column="2" 
														ClipToBounds="True">
													
													<SelectableTextBlock  Width="200"
																		  Text="{Binding ViewAddress, Mode=OneWay}"/>
												</Border>

												<Border Grid.Column="3"
														ClipToBounds="True">
													
													<SelectableTextBlock Width="200"
																		 Text="{Binding ViewData, Mode=OneWay}"/>
												</Border>												

											</Grid>

										</Border>

									</DataTemplate>

								</ItemsControl.ItemTemplate>

							</ItemsControl>

						</ScrollViewer>

					</Grid>

					<Border.Styles>

						<Style Selector="Label">
							<Setter Property="Foreground" Value="Black"/>
							<Setter Property="FontSize" Value="16"/>
							<Setter Property="HorizontalAlignment" Value="Center"/>
							<Setter Property="VerticalAlignment" Value="Center"/>
							<Setter Property="HorizontalContentAlignment" Value="Center"/>
							<Setter Property="VerticalContentAlignment" Value="Center"/>
						</Style>

						<Style Selector="SelectableTextBlock">
							<Setter Property="Foreground" Value="Black"/>
							<Setter Property="FontSize" Value="16"/>
							<Setter Property="TextAlignment" Value="Center"/>
							<Setter Property="HorizontalAlignment" Value="Center"/>
							<Setter Property="VerticalAlignment" Value="Center"/>
						</Style>
						
					</Border.Styles>

				</Border>

				<!-- Table View end definition -->
				
			</Grid>			

			<GridSplitter Grid.Column="1"
						  ResizeDirection="Columns"/>

			<local:RequestBuilder Grid.Column="2"
						          DataContext="{Binding RequestBuilder_VM}"/>


		</Grid>

		<GridSplitter Grid.Row="1"
					  ResizeDirection="Rows"/>

		<Grid Grid.Row="2">

			<TabControl>

				<TabItem Header="Последний запрос">
					<ScrollViewer>
						<ModbusRepresentations:LastRequest Margin="0,5,0,5"/>
					</ScrollViewer>
				</TabItem>

				<TabItem Header="История обмена">
					<ModbusRepresentations:Log Margin="0,5,0,5"/>
				</TabItem>
				
				<TabItem Header="Бинарное представление">
					<ModbusRepresentations:Binary Margin="0,5,0,5"/>
				</TabItem>

				<TabItem Header="Число типа float">
					<ModbusRepresentations:Float Margin="0,5,0,5"/>
				</TabItem>				
				
			</TabControl>

		</Grid>

	</Grid>

</UserControl>
